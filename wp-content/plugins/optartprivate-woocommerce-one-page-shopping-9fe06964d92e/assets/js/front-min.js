!function(t){t(document).ready(function(){function o(o,a,n,p,c){o.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.ajax({type:"post",url:ops_php_data.ajax_url,data:a,success:function(a){if(o.unblock(),n&&t("#one-page-shopping-cart-content").html(a),c===!0){var i=t("#order_review");if(i.length&&i.is(":visible"))t("body").trigger("update_checkout");else{var s=t("#shiptobilling-checkbox").length?t("#shiptobilling-checkbox").is(":checked"):"1"===ops_php_data.ship_to_billing_def,d=t("#ship-to-different-address-checkbox").length?t("#ship-to-different-address-checkbox").is(":checked"):"0"!==ops_php_data.ship_to_different_def;t("#one-page-shopping-checkout, #one-page-shopping-cart").show();var r={action:"ops_update_checkout"};r[ops_php_data.nonce_post_id]=ops_php_data.nonce,t.ajax({type:"post",url:ops_php_data.ajax_url,data:r,success:function(o){t("#one-page-shopping-checkout-content").html(o),t("#shiptobilling-checkbox").attr("checked",s).change(),t("#ship-to-different-address-checkbox").attr("checked",d).change()}})}}p!==!1&&p.length&&t("body").scrollTo(p,{duration:"slow"}),t("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added"),0===t("#one-page-shopping-cart-content table").length&&n&&(t("#one-page-shopping-checkout, #one-page-shopping-cart").hide(),t("body").scrollTo("#page",{duration:"slow"})),e()}})}function e(){for(var o=0;o<ops_php_data.remove_items.length;o++)t(ops_php_data.remove_items[o]).remove()}function a(t){var o=t.attr("name").split("["),e={name:o[0]};return void 0!==o[1]&&(e.id=o[1].replace("]","")),e}(0!==t("#one-page-shopping-cart-content table").length||ops_php_data.cart_count>0)&&t("#one-page-shopping-checkout, #one-page-shopping-cart").show(),t("#one-page-shopping-checkout-content").on("change","#shiptobilling input",function(){t("div.shipping_address").hide(),t(this).is(":checked")||t("div.shipping_address").slideDown()}),t("#shiptobilling input").change(),t("#one-page-shopping-checkout-content").on("change","#ship-to-different-address-checkbox",function(){t("div.shipping_address").hide(),t(this).is(":checked")&&t("div.shipping_address").slideDown()}),t("#ship-to-different-address-checkbox").change(),t("form.cart").on("click",".single_add_to_cart_button",function(e){var n={action:"ops_add_to_cart",form:{}},p=ops_php_data.display_cart?"#one-page-shopping-header":"#one-page-shopping-checkout-header",c=t(this).parents("form.cart").find("input[type!=radio][name], input[type=radio][name]:checked, select[name], textarea[name]");if(t(".group_table").length)c.each(function(){var o=a(t(this));void 0!==o.id&&(void 0===n.form[o.id]&&(n.form[o.id]={}),n.form[o.id][o.name]=t(this).val())});else{var i=t("input[name=add-to-cart]").val();c.each(function(){void 0===n.form[i]&&(n.form[i]={}),n.form[i][t(this).attr("name")]=t(this).val()})}return n[ops_php_data.nonce_post_id]=ops_php_data.nonce,o(t(e.target),n,ops_php_data.display_cart,p,!0),!1}),t(".products").on("click",".product_type_simple",function(e){e.preventDefault();var a=ops_php_data.display_cart?"#one-page-shopping-header":"#one-page-shopping-checkout-header",n={action:"ops_add_to_cart",form:{}};n[ops_php_data.nonce_post_id]=ops_php_data.nonce;var p=t(this).data("product_id");return n.form[p]={},n.form[p].quantity=t(this).data("quantity"),o(t(e.target),n,ops_php_data.display_cart,a,!0),!1}),t("div.related").on("click",".add_to_cart_button_ops",function(e){var a={action:"ops_add_to_cart_related",product_id:t(this).attr("data-product_id")},n=ops_php_data.display_cart?"#one-page-shopping-header":"#one-page-shopping-checkout-header";return a[ops_php_data.nonce_post_id]=ops_php_data.nonce,o(t(e.target),a,ops_php_data.display_cart,n,!0),!1}),t("#one-page-shopping-cart-content").on("click",".product-remove > a",function(e){var a=this.search.split("remove_item=");if(void 0!==a[1]&&(a=a[1].split("&"),void 0!==a[0])){var n={action:"ops_remove_from_cart",cart_item:a[0]};return n[ops_php_data.nonce_post_id]=ops_php_data.nonce,o(t(e.target).closest("form"),n,!0,!1,!0),!1}}),t("#one-page-shopping-cart-content").on("click","input[name=update_cart]",function(e){var a,n=/\[(\w*)\]\[(\w*)\]/,p={action:"ops_update_cart",cart:new Object};return p[ops_php_data.nonce_post_id]=ops_php_data.nonce,t(this).parents("form").find("input[name^=cart]").each(function(){a=t(this).attr("name").match(n),void 0!==a[2]&&(void 0===p.cart[a[1]]&&(p.cart[a[1]]=new Object),p.cart[a[1]][a[2]]=t(this).val())}),o(t(e.target),p,!0,!1,!0),!1}),ops_php_data.display_checkout&&t("#one-page-shopping-cart-content").on("click","input[name=proceed]",function(){return t("body").scrollTo("#one-page-shopping-checkout-header",{duration:"slow"}),!1}),t("#one-page-shopping-checkout-content").on("click",".woocommerce-remove-coupon",function(e){var a={action:"ops_remove_coupon"};a[ops_php_data.nonce_post_id]=ops_php_data.nonce;var n=this.search.split("remove_coupon=");return void 0!==n[1]&&(a.coupon=n[1],o(t(e.target),a,!1,!1,!0)),!1}),e()})}(jQuery);
